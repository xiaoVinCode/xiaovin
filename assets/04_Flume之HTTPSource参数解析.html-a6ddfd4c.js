import{_ as s}from"./plugin-vue_export-helper-c27b6911.js";import{r as d,o as n,c as r,a as t,b as l,d as o,f as e}from"./app-06e284b9.js";const i={},p=e('<h4 id="一、介绍" tabindex="-1"><a class="header-anchor" href="#一、介绍" aria-hidden="true">#</a> 一、介绍</h4><p>Flume 1.9.0 版本的 HTTPSource 是一种数据源类型，可以用于接收通过 HTTP 协议传输的数据。这个版本中，HTTPSource 新增了许多参数，并且改进了性能和稳定性。</p><h4 id="二、常用参数说明" tabindex="-1"><a class="header-anchor" href="#二、常用参数说明" aria-hidden="true">#</a> 二、常用参数说明：</h4><table><thead><tr><th>序号</th><th>参数</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td>type</td><td>HTTPSource</td><td>必选参数，指定该数据源类型为 HTTPSource。</td></tr><tr><td>2</td><td>bind</td><td>0.0.0.0</td><td>可选参数，指定 HTTPServer 绑定的 IP 地址，默认为 0.0.0.0。</td></tr><tr><td>3</td><td>port</td><td>-</td><td>必选参数，指定 HTTPServer 监听的端口号。</td></tr><tr><td>4</td><td>handler</td><td>JSONHandler</td><td>可选参数，指定 HTTP 请求处理类，默认为 org.apache.flume.source.http.JSONHandler。</td></tr><tr><td>5</td><td>handler.maxEvents</td><td>-1</td><td>可选参数，指定每次 HTTP 请求最大读取事件数，默认为 -1（无限制）。</td></tr><tr><td>6</td><td>handler.defaultCharset</td><td>UTF-8</td><td>可选参数，指定默认字符集，默认为 UTF-8。</td></tr><tr><td>7</td><td>keep-alive</td><td>true</td><td>可选参数，指定是否开启 Keep-Alive 功能，默认为 true。</td></tr><tr><td>8</td><td>sslEnabled</td><td>false</td><td>可选参数，指定是否开启 SSL 加密传输，默认为 false。</td></tr><tr><td>9</td><td>keyStorePath</td><td>-</td><td>当 <code>sslEnabled</code> 设置为 true 时，需要配置这个参数以指定服务端证书的存储路径。</td></tr><tr><td>10</td><td>keyStorePassword</td><td>-</td><td>当 <code>sslEnabled</code> 设置为 true 时，需要配置这个参数以指定服务端证书的密码。</td></tr><tr><td>11</td><td>trustStorePath</td><td>-</td><td>当 <code>sslEnabled</code> 设置为 true 时，需要配置这个参数以指定信任的证书的存储路径。</td></tr><tr><td>12</td><td>trustStorePassword</td><td>-</td><td>当 <code>sslEnabled</code> 设置为 true 时，需要配置这个参数以指定信任的证书的密码。</td></tr><tr><td>13</td><td>excludePattern</td><td>-</td><td>可选参数，指定不接收的 URL（正则表达式）。</td></tr><tr><td>14</td><td>channels</td><td>-</td><td>必选参数，指定数据发送到哪个通道。</td></tr></tbody></table><p>以上是 HTTPSource 的常用参数说明，可以根据需求自行定义和添加其他参数。</p><p>另外，HTTPSource 还有以下特点：</p><ol><li>可以通过 HTTP 协议传输多种类型数据，如文本、JSON、XML、二进制等。</li><li>可以将接收到的数据一次性发送到指定的 channel，也可以将数据分割成事件逐个发送到 channel。</li><li>可以通过配置 handler 类来指定处理 HTTP 请求的方式，默认提供 JSONHandler 处理类。也可自定义处理类。</li></ol>',7),c={href:"https://flume.liyifeng.org/#http-source",target:"_blank",rel:"noopener noreferrer"},u=e(`<figure><img src="https://static-resource-yang.oss-cn-shenzhen.aliyuncs.com/typora_pic/202304091759406.png" alt="image-20230409175908355" tabindex="0" loading="lazy"><figcaption>image-20230409175908355</figcaption></figure><h4 id="三、更多参数" tabindex="-1"><a class="header-anchor" href="#三、更多参数" aria-hidden="true">#</a> 三、更多参数</h4><table><thead><tr><th>序号</th><th>参数</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>1</td><td>threads</td><td>10</td><td>可选参数，指定异步事件处理的线程数，默认为 10。</td></tr><tr><td>2</td><td>maxBatchSize</td><td>-1</td><td>可选参数，指定每批次最大的事件数量。默认值 -1 表示无限制。</td></tr><tr><td>3</td><td>maxBatchDurationMillis</td><td>-1</td><td>可选参数，指定每批次最大的处理时间。默认值 -1 表示无限制。</td></tr><tr><td>4</td><td>maxRequestSize</td><td>100MB</td><td>可选参数，指定每个请求的最大大小。默认值 100MB。</td></tr><tr><td>5</td><td>requestTimeout</td><td>2000</td><td>可选参数，指定请求超时时间（毫秒）。默认值 2000 毫秒。</td></tr><tr><td>6</td><td>responseBufferSize</td><td>16KB</td><td>可选参数，指定响应缓存区的大小。默认值 16KB。</td></tr><tr><td>7</td><td>customHeaders</td><td>-</td><td>可选参数，指定自定义的 HTTP 头信息，格式为 K1:V1,K2:V2,...。</td></tr><tr><td>8</td><td>portBinding</td><td>default</td><td>可选参数，指定端口绑定模式，可以是 &quot;default&quot; 或 &quot;exclusive&quot;。</td></tr><tr><td>9</td><td>enableCompression</td><td>false</td><td>可选参数，指定是否启用 GZIP 压缩传输。默认为 false。</td></tr><tr><td>10</td><td>compressionLevel</td><td>-1</td><td>可选参数，指定 GZIP 压缩级别。默认为 -1。</td></tr><tr><td>11</td><td>excludeMethods</td><td>-</td><td>可选参数，指定不接受的 HTTP 请求方法，如 POST,PUT。默认为空。</td></tr><tr><td>12</td><td>maxHttpHeaderSize</td><td>8192</td><td>可选参数，指定 HTTP 请求头最大长度。默认为 8192 字节。</td></tr></tbody></table><h4 id="四、企业级调优后的-httpsource-的案例" tabindex="-1"><a class="header-anchor" href="#四、企业级调优后的-httpsource-的案例" aria-hidden="true">#</a> 四、企业级调优后的 HTTPSource 的案例</h4><ol><li>配置 IP 地址绑定</li></ol><p>如果您的服务器有多个 IP 地址，建议使用 <code>bind</code> 参数指定具体的 IP 地址，以避免绑定错误的 IP 地址导致接收不到数据。</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">agent.sources.http-source.bind</span> <span class="token punctuation">=</span> <span class="token value attr-value">192.168.1.100</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>开启 Keep-Alive</li></ol><p>开启 Keep-Alive 功能可以减少 TCP 连接的创建和销毁次数，提升性能。</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">agent.sources.http-source.keep-alive</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>配置 SSL 加密传输</li></ol><p>如果需要对传输数据进行加密保护，可以开启 SSL 加密传输功能。需要注意的是，在开启 SSL 加密传输时，需要配置相关的证书信息。</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">agent.sources.http-source.sslEnabled</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>
<span class="token key attr-name">agent.sources.http-source.keyStorePath</span> <span class="token punctuation">=</span> <span class="token value attr-value">/path/to/keystore</span>
<span class="token key attr-name">agent.sources.http-source.keyStorePassword</span> <span class="token punctuation">=</span> <span class="token value attr-value">password</span>
<span class="token key attr-name">agent.sources.http-source.trustStorePath</span> <span class="token punctuation">=</span> <span class="token value attr-value">/path/to/truststore</span>
<span class="token key attr-name">agent.sources.http-source.trustStorePassword</span> <span class="token punctuation">=</span> <span class="token value attr-value">password</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>增加异步事件处理线程数</li></ol><p>增加异步事件处理线程数可以提高并发性能。</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">agent.sources.http-source.threads</span> <span class="token punctuation">=</span> <span class="token value attr-value">32</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>调整批量发送大小和间隔时间</li></ol><p>合理的批量发送大小和间隔时间可以有效减少网络 IO 操作的次数。</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">agent.sources.http-source.maxBatchSize</span> <span class="token punctuation">=</span> <span class="token value attr-value">500</span>
<span class="token key attr-name">agent.sources.http-source.maxBatchDurationMillis</span> <span class="token punctuation">=</span> <span class="token value attr-value">1000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>增加请求超时时间</li></ol><p>在处理大流量数据时，可能会出现请求超时的情况。可以适当增加请求超时时间，以避免数据丢失。</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">agent.sources.http-source.requestTimeout</span> <span class="token punctuation">=</span> <span class="token value attr-value">5000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="7"><li>开启 GZIP 压缩传输</li></ol><p>开启 GZIP 压缩传输可以减少网络传输的数据量，提高传输效率。</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">agent.sources.http-source.enableCompression</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>
<span class="token key attr-name">agent.sources.http-source.compressionLevel</span> <span class="token punctuation">=</span> <span class="token value attr-value">5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,25);function h(v,m){const a=d("ExternalLinkIcon");return n(),r("div",null,[p,t("p",null,[t("a",c,[l("Flume 1.9用户手册中文版"),o(a)])]),u])}const b=s(i,[["render",h],["__file","04_Flume之HTTPSource参数解析.html.vue"]]);export{b as default};
